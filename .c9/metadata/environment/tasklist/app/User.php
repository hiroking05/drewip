{"filter":false,"title":"User.php","tooltip":"/tasklist/app/User.php","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":33,"column":0},"end":{"row":82,"column":0},"action":"remove","lines":["    ","    public function followings()","    {","        return $this->belongsToMany(User::class, 'user_follow', 'user_id', 'follow_id')->withTimestamps();","    }","","    public function followers()","    {","        return $this->belongsToMany(User::class, 'user_follow', 'follow_id', 'user_id')->withTimestamps();","    }","    ","    public function follow($userId)","    {","        // 既にフォローしているかの確認","        $exist = $this->is_following($userId);","        // 相手が自分自身ではないかの確認","        $its_me = $this->id == $userId;","    ","        if ($exist || $its_me) {","            // 既にフォローしていれば何もしない","            return false;","        } else {","            // 未フォローであればフォローする","            $this->followings()->attach($userId);","            return true;","        }","    }","    ","    public function unfollow($userId)","    {","        // 既にフォローしているかの確認","        $exist = $this->is_following($userId);","        // 相手が自分自身ではないかの確認","        $its_me = $this->id == $userId;","    ","        if ($exist && !$its_me) {","            // 既にフォローしていればフォローを外す","            $this->followings()->detach($userId);","            return true;","        } else {","            // 未フォローであれば何もしない","            return false;","        }","    }","    ","    public function is_following($userId)","    {","        return $this->followings()->where('follow_id', $userId)->exists();","    }",""],"id":2,"ignore":true}]]},"ace":{"folds":[],"scrolltop":204.5,"scrollleft":0,"selection":{"start":{"row":33,"column":0},"end":{"row":33,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1573697858446,"hash":"27d5af1767b1169b7a3b97d9f1f0b960b278e8da"}